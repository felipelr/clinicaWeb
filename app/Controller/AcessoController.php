<?php/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. */App::uses('AuthController', 'Controller');App::uses('Acesso', 'Model');/** * CakePHP TipoFinanceiroController * @author BersaN & StarK */class AcessoController extends AuthController {    public function index() {    }    public function cadastrar() {        if ($this->request->is("post")) {            $this->layout = null;            $this->autoRender = false;            $data = $this->request->data;            $dataAcesso = $data["Acesso"];            $Acesso = new Acesso();            $Acesso->save($dataAcesso);            $this->Session->setFlash(__("Cadastrado com sucesso."), 'sucesso');            return $this->redirect(array("controller" => "acesso", "action" => "index"));        }    }        public function ajax() {        $this->layout = null;        $this->autoRender = false;        $columns = (isset($this->request->query["columns"])) ? $this->request->query["columns"] : null;        $order = (isset($this->request->query["order"])) ? $this->request->query["order"] : null;        $draw = (isset($this->request->query["draw"])) ? $this->request->query["draw"] : 0;        $start = (isset($this->request->query["start"])) ? $this->request->query["start"] : 0;        $length = (isset($this->request->query["length"])) ? $this->request->query["length"] : 0;        $search = (isset($this->request->query["search"]["value"]) && !empty($this->request->query["search"]["value"])) ? $this->request->query["search"]["value"] : null;        $ordenacao = $columns[$order[0]["column"]]["data"] . " " . strtoupper($order[0]["dir"]);        $content = new Acesso();        $contents = $content->listarJQuery($search, $start, $length, $ordenacao);        echo json_encode(                array(                    "draw" => $draw,                    "recordsTotal" => (int) $content->totalRegistro(),                    "recordsFiltered" => (int) $content->totalRegistroFiltrado($search),                    "data" => $contents                )        );    }        public function alterar($idAcesso) {        $Acesso = new Acesso();        if ($this->request->is("get")) {            if (isset($idAcesso)) {                $Acesso = $Acesso->retornarPorId($idAcesso);                $this->set("Acesso", $Acesso);            } else {                return $this->redirect(array("controller" => "acesso", "action" => "index"));            }        }        if ($this->request->is("post")) {            $data = $this->request->data;            $dataAcesso = $data["Acesso"];            $Acesso = new Acesso();            $Acesso->save($dataAcesso);            $this->Session->setFlash(__("Atualizado com sucesso."), 'sucesso');            return $this->redirect(array("controller" => "acesso", "action" => "index"));        }    }    public function excluir() {        $idAcesso = $this->request->data['idAcesso'];        $this->autoRender = false;        $this->layout = null;        if ($this->request->is("post")) {            if (isset($idAcesso)) {                $Acesso = new Acesso();                $Acesso->idAcesso = $idAcesso;                $Acesso->excluir($idAcesso);                $this->Session->setFlash(__("ExcluÃ­do com sucesso!"), 'sucesso');            }        }        return $this->redirect(array("controller" => "acesso", "action" => "index"));    }        public function sem_acesso(){        $this->layout = "default_sem_acesso";    }}